version: "3"

includes:
  gw:
    taskfile: ./gw/taskfile.yaml
    dir: ./gw
  mailer:
    taskfile: ./mailer/taskfile.yaml
    dir: ./mailer
  rw:
    taskfile: ./ratewatcher/taskfile.yaml
    dir: ./ratewatcher
  sub:
    taskfile: ./sub/taskfile.yaml
    dir: ./sub
  protos:
    taskfile: ./protos/taskfile.yaml
    dir: ./protos

tasks:
  default:
    desc: "Show available tasks"
    cmds:
      - task --list-all
  test:
    cmds:
      - task gw:test
      - task mailer:test
      - task rw:test
      - task sub:test
  test:race:
    cmds:
      - task gw:test:race
      - task mailer:test:race
      - task rw:test:race
      - task sub:test:race
